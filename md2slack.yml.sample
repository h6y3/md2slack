# Save this as ~/Library/Application Support/espanso/match/md2slack.yml

# Configuration for md2slack script integration
matches:
  # Quick clipboard conversion - read from clipboard and write back to clipboard
  - trigger: ":md2slack"
    replace: "{{output}}"
    vars:
      - name: output
        type: shell
        params:
          cmd: "md2slack -c -C && echo 'Markdown converted to Slack format (in clipboard)'"
          
  # Convert text and replace it with Slack-formatted version (insert)
  - trigger: ":mdinsert"
    form: true
    replace: "{{output}}"
    vars:
      - name: form_text
        type: form
        params:
          layout: |
            Enter text to convert:
            [[text]]
      - name: output
        type: shell
        params:
          cmd: "echo '{{form_text.text}}' | md2slack"
          
  # Convert text and copy to clipboard (but don't replace text)
  - trigger: ":mdcopy"
    form: true
    replace: "{{form_text.text}}"
    vars:
      - name: form_text
        type: form
        params:
          layout: |
            Enter text to convert:
            [[text]]
      - name: clipboard_copy
        type: shell
        params:
          cmd: "echo '{{form_text.text}}' | md2slack -C && echo 'Converted to clipboard'"